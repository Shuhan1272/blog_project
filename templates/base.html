{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}BlogSite{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- FontAwesome -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src={% static "js/password_toggle.js" %}></script> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">
  
  <!-- Navbar -->
  <header class="bg-white border-b shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-between">
        <a href="{% url 'home' %}" class="text-xl font-bold tracking-tight">BlogSite</a>
        <nav class="flex items-center gap-4">
          <a href="{% url 'home' %}" class="text-sm text-gray-700 hover:text-indigo-600">Home</a>
          {% if user.is_authenticated %}
            <a href="{% url 'favorites_list' %}" class="text-sm text-gray-700 hover:text-indigo-600">Favorites</a>
            <a href="{% url 'profile' request.user.id %}" class="text-sm text-gray-700 hover:text-indigo-600">Profile</a>
            <a href="{% url 'logout' %}" class="text-sm text-red-600 hover:text-red-700">Logout</a>
          {% else %}
            <a href="{% url 'login' %}" class="text-sm text-gray-700 hover:text-indigo-600">Login</a>
            <a href="{% url 'signup' %}" class="text-sm text-white bg-indigo-600 hover:bg-indigo-700 px-3 py-1.5 rounded-lg">Register</a>
          {% endif %}
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full">

    {% if messages %}
      <div id="messages" class="space-y-3 mb-6">
        {% for message in messages %}
          <div class="message px-4 py-3 rounded-lg shadow text-sm font-medium relative
                     {% if message.tags == 'success' %}
                       bg-green-50 border border-green-200 text-green-700
                     {% elif message.tags == 'error' %}
                       bg-red-50 border border-red-200 text-red-700
                     {% elif message.tags == 'warning' %}
                       bg-yellow-50 border border-yellow-200 text-yellow-700
                     {% else %}
                       bg-blue-50 border border-blue-200 text-blue-700
                     {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>

      <script>
        // Auto remove after 3s with fade
        setTimeout(() => {
          document.querySelectorAll('#messages .message').forEach(msg => {
            msg.style.transition = "opacity 0.5s ease";
            msg.style.opacity = "0";
            setTimeout(() => msg.remove(), 500);
          });
        }, 3000);
      </script>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="border-t bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-sm text-gray-500">
      &copy; {{ year|default:"2025" }} BlogSite â€” All rights reserved.
    </div>
  </footer>

</body>
</html>
